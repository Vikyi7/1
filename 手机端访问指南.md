# 手机端访问指南 - 无需相同网络

## 🚀 方案一：内网穿透（快速测试，推荐）

### 使用 ngrok（最简单）

#### 步骤 1：下载 ngrok
1. 访问：https://ngrok.com/download
2. 下载 Windows 版本
3. 解压到任意目录（如 `C:\ngrok\`）

#### 步骤 2：注册账号（免费）
1. 访问：https://dashboard.ngrok.com/signup
2. 注册账号（可用 GitHub/Google 登录）
3. 获取 Authtoken（在 Dashboard 中）

#### 步骤 3：配置 ngrok
```bash
# 在命令行中运行（替换 YOUR_AUTH_TOKEN）
ngrok config add-authtoken YOUR_AUTH_TOKEN
```

#### 步骤 4：启动后端穿透
```bash
# 启动后端服务器穿透（端口 3000）
ngrok http 3000
```

会显示类似：
```
Forwarding  https://abc123.ngrok-free.app -> http://localhost:3000
```

**复制这个 HTTPS 地址**（如：`https://abc123.ngrok-free.app`）

#### 步骤 5：配置前端 API 地址

创建 `.env` 文件（在项目根目录）：
```env
VITE_API_URL=https://abc123.ngrok-free.app
```

#### 步骤 6：启动前端
```bash
npm run dev
```

#### 步骤 7：获取前端地址

在另一个命令行窗口启动前端穿透：
```bash
# 启动前端穿透（端口 5173）
ngrok http 5173
```

会显示类似：
```
Forwarding  https://xyz789.ngrok-free.app -> http://localhost:5173
```

**复制这个 HTTPS 地址**（如：`https://xyz789.ngrok-free.app`）

#### 步骤 8：手机访问
1. 在手机浏览器中打开：`https://xyz789.ngrok-free.app`
2. 完成！

---

### 使用 localtunnel（无需注册）

#### 步骤 1：安装
```bash
npm install -g localtunnel
```

#### 步骤 2：启动后端穿透
```bash
lt --port 3000
```

会显示类似：
```
your url is: https://random-name.loca.lt
```

#### 步骤 3：启动前端穿透
```bash
lt --port 5173
```

#### 步骤 4：配置前端
在 `.env` 文件中设置后端地址：
```env
VITE_API_URL=https://random-name.loca.lt
```

---

## ☁️ 方案二：云部署（长期使用）

### 前端部署到 Vercel

#### 步骤 1：安装 Vercel CLI
```bash
npm install -g vercel
```

#### 步骤 2：登录
```bash
vercel login
```

#### 步骤 3：部署前端
```bash
# 在项目根目录
vercel --prod
```

#### 步骤 4：获取前端地址
部署完成后会显示：`https://your-app.vercel.app`

---

### 后端部署到 Railway（推荐）

#### 步骤 1：访问 Railway
1. 访问：https://railway.app
2. 使用 GitHub 账号登录

#### 步骤 2：创建项目
1. 点击 "New Project"
2. 选择 "Deploy from GitHub repo"
3. 选择你的仓库（或先上传到 GitHub）

#### 步骤 3：配置项目
1. 选择 `server` 目录作为根目录
2. 设置启动命令：`npm start`
3. 设置端口：Railway 会自动分配

#### 步骤 4：获取后端地址
部署完成后会显示：`https://your-app.railway.app`

#### 步骤 5：配置前端
在 Vercel 项目设置中添加环境变量：
```
VITE_API_URL=https://your-app.railway.app
```

然后重新部署前端。

---

### 后端部署到 Render（免费替代方案）

#### 步骤 1：访问 Render
1. 访问：https://render.com
2. 注册账号

#### 步骤 2：创建 Web Service
1. 点击 "New +" → "Web Service"
2. 连接 GitHub 仓库
3. 设置：
   - **Name**: yixin-server
   - **Root Directory**: server
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`
   - **Environment**: Node

#### 步骤 3：获取地址
部署完成后会显示：`https://your-app.onrender.com`

---

## 📱 手机安装为 PWA

### iPhone/iPad
1. 用 **Safari** 打开应用网址
2. 点击底部的**分享按钮**（方框+箭头）
3. 选择 **"添加到主屏幕"**
4. 点击 **"添加"**
5. ✅ 完成！

### Android
1. 用 **Chrome** 打开应用网址
2. 浏览器会显示 **"安装应用"** 提示
3. 点击 **"安装"**
4. ✅ 完成！

---

## ⚠️ 注意事项

### 内网穿透方案
- ✅ 适合快速测试
- ❌ 免费版有连接数限制
- ❌ 地址每次可能变化（ngrok 免费版）
- ❌ 需要保持电脑运行

### 云部署方案
- ✅ 永久地址
- ✅ 不需要电脑运行
- ✅ 全球 CDN 加速
- ❌ 需要配置部署流程

---

## 🔧 快速启动脚本

### 创建 ngrok 启动脚本

创建 `启动穿透.bat`：
```batch
@echo off
chcp 65001 >nul 2>&1
title 启动内网穿透
cd /d "%~dp0"

echo.
echo ========================================
echo   启动内网穿透服务
echo ========================================
echo.

echo 启动后端穿透（端口 3000）...
start "后端穿透" cmd /k "ngrok http 3000"

timeout /t 2 /nobreak >nul

echo 启动前端穿透（端口 5173）...
start "前端穿透" cmd /k "ngrok http 5173"

echo.
echo ========================================
echo   请复制显示的 HTTPS 地址
echo ========================================
echo.
echo 1. 复制后端地址，添加到 .env 文件：
echo    VITE_API_URL=你的后端地址
echo.
echo 2. 复制前端地址，在手机浏览器中打开
echo.
pause
```

---

## ✅ 推荐方案

**快速测试**：使用 ngrok 内网穿透
**长期使用**：前端部署 Vercel + 后端部署 Railway

享受你的应用吧！🎉
